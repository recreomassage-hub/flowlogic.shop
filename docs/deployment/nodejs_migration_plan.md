# üîÑ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ Node.js 20.x ‚Üí 22.x –¥–ª—è AWS Lambda

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-26  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø** - Node.js 20.x –±—É–¥–µ—Ç deprecated 30 –∞–ø—Ä–µ–ª—è 2026

---

## üìã –û–ë–ó–û–†

AWS Lambda –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É Node.js 20.x:
- **30 –∞–ø—Ä–µ–ª—è 2026** - –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ security patches
- **1 –∏—é–Ω—è 2026** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å Node.js 20.x
- **1 –∏—é–ª—è 2026** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å Node.js 20.x

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ **Node.js 22.x** (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ 30 –∞–ø—Ä–µ–ª—è 2027)

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ú–ò–ì–†–ê–¶–ò–ò

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Serverless Framework

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `infra/serverless/serverless.yml`:
  ```yaml
  provider:
    runtime: nodejs22.x  # –±—ã–ª–æ: nodejs20.x
  ```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GitHub Actions

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `.github/workflows/ci-cd.yml`:
  ```yaml
  - name: Setup Node.js
    uses: actions/setup-node@v4
    with:
      node-version: '22'  # –±—ã–ª–æ: '20'
  ```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ package.json

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/backend/package.json`:
  ```json
  {
    "engines": {
      "node": ">=22.0.0"  // –±—ã–ª–æ: ">=20.0.0"
    },
    "devDependencies": {
      "@types/node": "^22.0.0"  // –±—ã–ª–æ: "^20.10.5"
    }
  }
  ```

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/frontend/package.json`:
  ```json
  {
    "engines": {
      "node": ">=22.0.0"  // –±—ã–ª–æ: ">=20.0.0"
    }
  }
  ```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∫–æ–¥–∞

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö Node.js API
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å Node.js 22.x
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Node.js 22.x
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] Production deployment

---

## üöÄ –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)

1. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - `serverless.yml` ‚Üí `nodejs22.x`
   - GitHub Actions ‚Üí `node-version: '22'`
   - `package.json` ‚Üí `engines.node: ">=22.0.0"`

2. **–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   cd src/backend
   npm install @types/node@^22.0.0 --save-dev
   npm install
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
   ```bash
   npm audit
   npm outdated
   ```

### –≠—Ç–∞–ø 2: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js 22.x –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   # –ò—Å–ø–æ–ª—å–∑—É—è nvm
   nvm install 22
   nvm use 22
   ```

2. **–°–æ–±—Ä–∞—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
   ```bash
   cd src/backend
   npm run build
   npm test
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:**
   ```bash
   npm run dev
   ```

### –≠—Ç–∞–ø 3: Dev Deployment (1 –¥–µ–Ω—å)

1. **–î–µ–ø–ª–æ–π –≤ dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
   ```bash
   cd infra/serverless
   npx serverless deploy --stage dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å runtime
   aws lambda get-function-configuration \
     --function-name flowlogic-dev-api \
     --query Runtime
   
   # –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: "nodejs22.x"
   ```

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints**

### –≠—Ç–∞–ø 4: Staging Deployment (1 –¥–µ–Ω—å)

1. **–î–µ–ø–ª–æ–π –≤ staging:**
   ```bash
   npx serverless deploy --stage staging
   ```

2. **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### –≠—Ç–∞–ø 5: Production Deployment (1 –¥–µ–Ω—å)

1. **–î–µ–ø–ª–æ–π –≤ production:**
   ```bash
   npx serverless deploy --stage production
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞**

---

## üîç –ü–†–û–í–ï–†–ö–ê –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Node.js 22.x

1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ CA:**
   - Node.js 22.x –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞–≥—Ä—É–∑–∫–∏ CA —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
   - –ú–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ HTTPS –∑–∞–ø—Ä–æ—Å—ã
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç

2. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ API:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ API –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ deprecated
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å —Ñ–ª–∞–≥–æ–º `--deprecation-warnings`

3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ npm –ø–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å Node.js 22.x
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `npm install` –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üõ†Ô∏è –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π runtime Lambda —Ñ—É–Ω–∫—Ü–∏–π

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å Node.js 20.x
aws lambda list-functions \
  --region us-east-1 \
  --output text \
  --query "Functions[?Runtime=='nodejs20.x'].FunctionArn"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å runtime –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
aws lambda get-function-configuration \
  --function-name flowlogic-production-api \
  --query Runtime
```

### –û–±–Ω–æ–≤–∏—Ç—å runtime —á–µ—Ä–µ–∑ AWS CLI (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
aws lambda update-function-configuration \
  --function-name flowlogic-production-api \
  --runtime nodejs22.x
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Serverless Framework –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–û–°–õ–ï –ú–ò–ì–†–ê–¶–ò–ò

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

1. **CloudWatch Logs:**
   - –û—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ deprecated API
   - Performance –º–µ—Ç—Ä–∏–∫–∏

2. **Lambda Metrics:**
   - Duration
   - Errors
   - Throttles
   - Concurrent executions

3. **API Gateway:**
   - Response times
   - Error rates
   - 4xx/5xx errors

---

## ‚ö†Ô∏è –û–¢–ö–ê–¢ (ROLLBACK)

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:

1. **–í–µ—Ä–Ω—É—Ç—å runtime –≤ serverless.yml:**
   ```yaml
   provider:
     runtime: nodejs20.x
   ```

2. **Redeploy:**
   ```bash
   npx serverless deploy --stage production
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ Node.js 20.x**

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –û—Ç–∫–∞—Ç –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–æ 1 –∏—é–ª—è 2026. –ü–æ—Å–ª–µ —ç—Ç–æ–π –¥–∞—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Å Node.js 20.x –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

- [AWS Lambda Runtimes](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html)
- [Node.js 22 Release Notes](https://nodejs.org/en/blog/release/v22.0.0)
- [AWS Lambda Runtime Support Policy](https://docs.aws.amazon.com/lambda/latest/dg/runtime-support-policy.html)
- [Node.js Release Schedule](https://github.com/nodejs/Release#release-schedule)

---

## ‚úÖ –°–¢–ê–¢–£–° –ú–ò–ì–†–ê–¶–ò–ò

- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] Dev deployment –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] Staging deployment –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] Production deployment –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≠—Ç–∞–ø 1)

**–î–µ–¥–ª–∞–π–Ω:** –î–æ 30 –∞–ø—Ä–µ–ª—è 2026 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ 1 –∏—é–Ω—è 2026)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-26

